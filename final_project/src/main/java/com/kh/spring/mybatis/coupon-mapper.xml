<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="coupon">

	<!-- SuperAdmin 쿠폰등록 -->
	<insert id="regist" parameterType="couponDto">
		insert into coupon values(
			coupon_seq.nextval, #{name}, #{issue_type}, #{discount_type},
			#{discount_price}, #{max_price}, #{start_date}, #{finish_date}, 
			sysdate , #{issue_status}, sysdate, sysdate, #{auto_type} 
		)
	</insert>
	
	<!-- 나의 쿠폰번호 구하기 -->
	<select id="get_coupon_code" parameterType="int" resultType="issueDto">
		select * from issue where member_code=#{member_code}
	</select>
	
	<!-- 나의 쿠폰정보 구하기 -->
	<select id="get_coupon_info" parameterType="int" resultType="couponDto">
		select * from coupon where no=#{coupon_code} order by no desc
	</select>
</mapper>