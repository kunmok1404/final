<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="service">
<!-- 자주하는 질문 목록보기 -->
	<select id="qna_list" parameterType="map" resultType="qnaDto">
		<!-- 부등호 등 태그 형식에서 사용 불가한 글자를 허용하는 지역 생성 -->
		select * from(
			select rownum rn, A.* from (
				
				select * from qna
				<if test="category != null ">
					where category=#{category}
				</if>
				order by no desc
			
			)A
		) where rn between #{start} and #{end}
	</select>
	
	<!-- 자주하는 질문 검색기능 -->
	<select id="qna_count" parameterType="string" resultType="int">
		select count(*) from qna
			<if test="category != null">
				where category=#{category} 
			</if>
	</select>
	
	<!-- 자주하는 질문 글쓰기 기능 -->
	<insert id="qna_write" parameterType="qnaDto">
		insert into qna values(
			qna_seq.nextval, 1, #{question}, #{answer}, sysdate, sysdate,
			'y', #{writer}, 'admin')
	</insert>
		
	<delete id="qna_delete" parameterType="int">
	 	delete qna where no = #{no}
	</delete>


<!-- 공지사항 목록기능-->
	<select id="notice_list" parameterType="map" resultType="noticeDto">
		<!-- 부등호 등 태그 형식에서 사용 불가한 글자를 허용하는 지역 생성 -->
		select * from(
			select rownum rn, A.* from (
				
				select * from notice
				<if test="keyword != null ">
					where keyword=#{keyword}
				</if>
				order by no desc
			
			)A
		) where rn between #{start} and #{end}
	</select>
	
<!-- 공지사항 검색기능-->	
	<select id="notice_count" parameterType="string" resultType="int">
		select count(*) from notice
			<if test="keyword != null">
				where keyword=#{keyword} 
			</if>
	</select>
</mapper>